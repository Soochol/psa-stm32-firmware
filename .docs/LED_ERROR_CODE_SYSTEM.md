# LED 에러 코드 현장 대처 가이드

## 🚨 긴급 상황 대처

### ⚠️ 모든 LED 깜빡임 (●●●●●)

**즉시 조치:**

1. **전원 차단** - 즉시 기기 전원을 끄세요
2. **사용 중지** - 절대 재사용하지 마세요
3. **서비스 센터 연락** - 히터 과전류 위험

---

## LED 에러 패턴표

**⚠️ 업데이트 (v1.00.35)**: 패턴 3-12번이 변경되었습니다. 실내/실외 온도 센서를 구분합니다.

| LED 패턴 | 코드 | 문제 | 즉시 조치 |
|---------|------|------|---------|
| ○○○○● | 0b00001 | 열화상 카메라 고장 (IR 온도) | 기기 재시작 후 서비스 센터 연락 |
| ○○○●○ | 0b00010 | **실외** 온도 센서 고장 | 기기 재시작 후 서비스 센터 연락 |
| ○○○●● | 0b00011 | **실내** 온도 센서 고장 | 기기 재시작 후 서비스 센터 연락 |
| ○○●○○ | 0b00100 | 거리 센서 고장 (TOF) | 기기 재시작 후 서비스 센터 연락 |
| ○○●○● | 0b00101 | 자이로 센서 고장 (IMU) | 기기 재시작 후 서비스 센터 연락 |
| ○○●●○ | 0b00110 | 압력 센서 고장 (FSR) | 기기 재시작 후 서비스 센터 연락 |
| ○○●●● | 0b00111 | 오디오 모듈 고장 | 기기 재시작, 지속 시 서비스 센터 |
| ○●○○○ | 0b01000 | MP3 파일 없음 | SD 카드 확인, MP3 파일 복사 |
| ○●○○● | 0b01001 | SD 카드 오류 | SD 카드 재삽입 또는 교체 |
| ○●○●○ | 0b01010 | 송풍팬 고장 | 기기 재시작 후 서비스 센터 연락 |
| ○●○●● | 0b01011 | 쿨링팬 고장 | 기기 재시작 후 서비스 센터 연락 |
| ○●●○○ | 0b01100 | WiFi 연결 끊김 | 네트워크 확인, 기기 재시작 |
| ○●●○● | 0b01101 | **낙상 감지** | 사용자 안전 확인, 기기 재시작 |
| ●●●●● | 0b11111 | **히터 과전류** | **즉시 전원 차단! 위험!** |

**범례:**

- ● = LED 켜짐 (빨강-오렌지 깜빡임)
- ○ = LED 꺼짐

---

## LED 위치 확인

```text
         기기 본체
    ┌─────────────┐
    │ [5][4][3][2][1] │ ← 상단 LED
    │                 │
    │                 │
    │ [5][4][3][2][1] │ ← 하단 LED
    └─────────────┘
```

**LED 보는 방법:**

- 오른쪽부터 LED1, LED2, LED3, LED4, LED5
- 상단과 하단은 같은 패턴
- 0.5초마다 깜빡임

---

## 자주 묻는 질문 (FAQ)

### Q1: LED가 빨강-오렌지색으로 깜빡이는데 어떻게 하나요?

**A:** 위 표에서 켜진 LED 위치를 확인하세요.

- 예: 오른쪽에서 두 번째만 깜빡임 = ○○○●○ = 온도 센서 문제
- 조치: 기기 재시작 후 서비스 센터 연락

### Q2: 모든 LED가 깜빡이면 어떻게 하나요?

**A:** **즉시 전원을 끄세요!** 히터 과전류 위험 상황입니다.

- 절대 재사용하지 마세요
- 서비스 센터에 즉시 연락하세요

### Q3: SD 카드 오류는 어떻게 해결하나요?

**A:** LED 패턴이 ○●○○●인 경우:

1. 기기 전원 끄기
2. SD 카드 재삽입 (올바른 방향 확인)
3. FAT32 포맷 확인
4. 기기 재시작

### Q4: WiFi 연결 끊김은 어떻게 해결하나요?

**A:** LED 패턴이 ○●●○○인 경우 (v1.00.35 변경):

1. 네트워크 연결 확인
2. WiFi 라우터 재시작
3. 기기 재시작
4. 지속 시 서비스 센터 연락

### Q5: MP3 파일 없음 에러는 어떻게 해결하나요?

**A:** LED 패턴이 ○●○○○인 경우:

1. SD 카드에 MP3 파일 확인
2. MP3 파일 복사 (FAT32 포맷 SD 카드)
3. 기기 재시작

---

## 기본 대처 순서

### 1단계: LED 패턴 확인

- 상단 또는 하단 LED 관찰
- 깜빡이는 LED 위치 기억 (오른쪽부터 1, 2, 3, 4, 5)

### 2단계: 패턴표 확인

- 위 표에서 패턴 찾기
- 문제 유형 확인

### 3단계: 즉시 조치

- 표에 나온 즉시 조치 수행
- **●●●●● (모든 LED) 깜빡임 = 즉시 전원 차단!**

### 4단계: 기기 재시작

- 대부분 문제는 재시작으로 해결
- 전원 끄고 10초 대기 후 재시작

### 5단계: 지속 시 서비스 센터 연락

- 재시작 후에도 같은 에러 발생 시
- 서비스 센터 연락 시 LED 패턴 알려주기

---

## 에러 모드 시 기기 동작

**자동 정지:**

- ❌ 히터 (즉시 정지)
- ❌ 히트패드 (즉시 정지)
- ❌ 송풍팬 (즉시 정지)

**계속 작동:**

- ✅ 쿨링팬 (안전을 위해 계속 작동)
- ✅ LED 에러 표시
- ✅ WiFi 통신

---

## 서비스 센터 연락 시 알려주실 정보

1. **LED 패턴**: 어떤 LED가 깜빡이는지 (예: "오른쪽에서 두 번째만 깜빡임")
2. **발생 상황**: 언제 에러가 발생했는지
3. **재시작 여부**: 재시작 시도했는지, 해결되었는지
4. **반복 여부**: 에러가 반복되는지

---

## 🔄 변경 이력 (Change Log)

### v1.00.36 (2025-12-04)

**변경 사항**:
- ✅ 낙상 감지 에러 추가 (패턴 13: ○●●○●)
- ✅ 낙상 발생 시 Actuator 긴급 정지 (Heater, HeatPad, BlowFan OFF)
- ✅ ESP 통신 타임아웃 개선 (10회 연속 실패 시에만 ERROR)

**영향**:
- ⚠️ 낙상 감지 시 ERROR 모드로 전환, 재시작 필요

---

### v1.00.35 (2025-11-18)

**변경 사항**:
- ✅ 실내 온도 센서 에러 추가 (패턴 3: ○○○●●)
- ✅ LED 패턴 3-12번 재정렬 (모든 패턴 +1 shift)
- ✅ AS6221 드라이버 버그 수정 (실내 센서 에러 처리)

**영향**:
- ⚠️ 펌웨어 v1.00.34 이하: 구 패턴 사용
- ⚠️ 펌웨어 v1.00.35 이상: 신 패턴 사용

**패턴 비교표**:

| LED 패턴 | 코드 | v1.00.34 이하 | v1.00.35 이상 |
|---------|------|--------------|-------------|
| ○○○●● | 0b00011 | 거리 센서 | **실내 온도** ← 신규 |
| ○○●○○ | 0b00100 | 자이로 센서 | **거리 센서** |
| ○○●○● | 0b00101 | 압력 센서 | **자이로 센서** |
| ○○●●○ | 0b00110 | 오디오 | **압력 센서** |
| ○○●●● | 0b00111 | MP3 없음 | **오디오** |
| ○●○○○ | 0b01000 | SD 카드 | **MP3 없음** |
| ○●○○● | 0b01001 | 송풍팬 | **SD 카드** |
| ○●○●○ | 0b01010 | 쿨링팬 | **송풍팬** |
| ○●○●● | 0b01011 | WiFi | **쿨링팬** |
| ○●●○○ | 0b01100 | (없음) | **WiFi** |

---

**문서 버전**: 1.00.36 (현장용)
**최종 업데이트**: 2025-12-04
**펌웨어 호환**: v1.00.36 이상
